<!DOCTYPE html>
<html>

<head>
    <title>Scheme Bypass</title>
</head>

<body>
    <h1>
        Scheme Bypass<br>
        <span id="info"></span>
        <noscript>ERROR: JavaScript 작동 불가</noscript>
    </h1>

    <script type="text/javascript">
        const info = document.querySelector("#info");
        const params = (new URL(location.href)).searchParams;
        const target = params.get('url')?.trim() || "";

        if (target !== "") {
            const autoClose = () => {
                history.length <= 1 ? window.close() : history.back();
            }
            const flag = params.get('flag')?.trim().split(",") || "";

            if (!target.startsWith("http") && !flag.includes("skip") &&
                !confirm("⚠ 보안 위험 경고 ⚠\n외부 앱이 실행될 것 입니다!\n앱이 조작될 수 있으며 신뢰하지 않으면 취소하십시오.\n\n외부 앱 실행 URL:\n" + target + "\n\n[ENTER] 확인 | [ESC] 취소")) {
                autoClose();
            }

            location.href = target;

            info.textContent = "곧 페이지가 닫힙니다";
            setTimeout(autoClose, 5000);
        } else {
            info.textContent = "URL 입력 필요.";
        }
    </script>
</body>

</html>