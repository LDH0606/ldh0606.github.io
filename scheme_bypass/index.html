<!DOCTYPE html>
<html>

<head>
    <title>Scheme Bypass</title>
    <style>
        warn {
            background-color: red;
            color: yellow;
            font-weight: bolder;
        }
    </style>
</head>

<body>
    <h1 id="ext" style="display: none;">
        브라우저 외부 앱에 접근중<br>
        <warn>앱이 무단으로 조작될 수 있음!</warn><br>
        <warn style="color:white;">신뢰할 수 없는 URL이면 페이지 닫기!</warn><br>
    </h1>
    URL: <a id="url-text"></a><br><br>
    <h1 id="close-sec-text" style="display: none;"><span id="close-sec-val"></span>초 후 닫힘</h1>

    <noscript>Error(오류): JavaScript 미지원 브라우저</noscript>

    <script type="text/javascript">
        const url = new URL(location.href);
        const param = url.searchParams;
        const target = url.searchParams.get('url')?.trim();

        const urlText = document.getElementById("url-text");
        urlText.textContent = "입력되지 않음";

        const closeSecVal = document.getElementById("close-sec-val");
        let closeSec = 5;
        closeSecVal.textContent = closeSec;

        if (target) {
            urlText.href = target;
            urlText.textContent = target;

            if (!target.startsWith("http")) {
                document.getElementById("ext").style.display = "initial";
            }

            if (url.searchParams.get('dev') != "1") {
                location.href = target;
                document.getElementById("close-sec-text").style.display = "initial";

                setInterval(() => {
                    closeSec--;
                    if (closeSec == 0) {
                        history.length <= 1 ? window.close() : history.back();
                    }
                    closeSecVal.textContent = closeSec;
                }, 1000);
            } else {
                document.writeln("dev");
            }
        }
    </script>
</body>

</html>